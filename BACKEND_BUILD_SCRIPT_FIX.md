# Backend Build Script Fix

## Problem
The backend build script in `/backend/package.json` is read-only and doesn't ensure dependencies are installed before building:

```json
{
  "scripts": {
    "build": "cd ../frontend && bun install && npx vite build --outDir=../backend/frontend/dist"
  }
}
```

The issue is `bun install` runs with default settings which may skip devDependencies.

## Solution Required

The backend package.json build script needs to be updated to:

```json
{
  "scripts": {
    "build": "cd ../frontend && bun install --production=false && npx vite build --config ../vite.config.lowmem.ts --outDir=../backend/frontend/dist"
  }
}
```

Changes:
1. `--production=false` → Ensures devDependencies are installed (including @tailwindcss/vite)
2. `--config ../vite.config.lowmem.ts` → Uses the root config with fallback logic instead of frontend config

## Why This Works

- `--production=false` forces bun to install ALL dependencies including devDependencies
- The root vite config has dynamic import with fallback for @tailwindcss/vite
- If the module is missing, it falls back to PostCSS processing

## Verification

After this change, the build should succeed because:
1. All dependencies are installed (including @tailwindcss/vite)
2. If installation fails, the fallback config handles it gracefully

## Implementation Status

⚠️ **Blocked**: `/backend/package.json` is read-only and auto-generated by Encore/Leap

**Required Action**: Leap/Encore must update the backend template to include these flags

## Alternative Workaround

Since we can't modify the backend package.json, run the fix script before build:

```bash
./fix-build.sh
```

This ensures dependencies are installed correctly before Encore's build process starts.
